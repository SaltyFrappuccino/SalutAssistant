# Обмен данными между Сценарием и Фронтом

<tabs>
    <tab title="Сценарий">
Обмен данными между сценарием и фронтендом осуществляется с использованием тегов и обработчиков событий.

Используйте тег `script` в SmartApp DSL для отправки данных на фронтенд. Пример:

```Javascript
state: ВведиИмя
    q!: (имя)
        $AnyText::anyText
        
    a: {{$parseTree._anyText}}
    
    script:
        $response.replies = $response.replies || [];
        var body = {
            items: [{
                command: {
                    type: "smart_app_data",
                    action: {
                        type: "SET_NAME",
                        payload: $parseTree._anyText
                    }
                }
            }]
        };
        $response.replies.push({type: 'raw', body: body});
```

Здесь:

- **$parseTree._anyText**: данные, введенные пользователем, передаются в ответ.
- **type: "SET_NAME"**: идентификатор действия для отправки данных на фронтенд.
- **q!**: слово-триггер, услышав которое Салют запускает `state`
</tab>
<tab title="Фронт">


Используйте хук `useEffect()` для обработки данных, полученных от сценария:

```Javascript
useEffect(() => {
  assistantRef.current = initializeAssistant(() => {});

  assistantRef.current.on("data", ({ action }: any) => {
    if (action.type === "SET_NAME") {
      dispatch({ type: 'SET_NAME', payload: action.payload });
    }
  });
});
```

Здесь:

- **action.type**: тип действия, отправленного сценарием.
- **action.payload**: данные, переданные на фронт.
- 
Фронтенд принимает данные от сценария через событие on("data") и обновляет состояние приложения в зависимости от полученных данных. 
</tab> 
</tabs>